[workspace]
resolver = "2"
members = [
    "crates/webrtc-p2p",
    "crates/tools",
    "crates/engine-core",
    "crates/engine-cli",
    "crates/engine-wasm",
]

[workspace.dependencies]
serde       = { version = "1.0", features = ["derive"] }
serde_json  = "1.0"
anyhow      = "1.0"
log         = "0.4"
wasm-bindgen = "0.2"
wasm-bindgen-futures = "0.4"
js-sys = "0.3.77"
web-sys = "0.3"
clap = { version = "4.0", features = ["derive"] }
env_logger = "0.11"
rand = "0.9"
rand_xoshiro = "0.7"

# Debug build optimizations for reasonable test performance
# TT operations with SIMD and CAS loops are extremely slow without optimization
[profile.dev]
opt-level = 1  # Basic optimizations for debug builds

# Release build with debug assertions for catching bugs
[profile.release]
debug-assertions = true   # Release buildでもアサート有効
overflow-checks = true    # オーバーフロー検出
lto = "thin"             # 最適化は維持
