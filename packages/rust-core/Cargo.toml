[workspace]
resolver = "2"
members = [
    "crates/engine-core",
    "crates/engine-usi",
    "crates/engine-wasm", "crates/tools",
]

[workspace.dependencies]
serde       = { version = "1.0", features = ["derive"] }
serde_json  = "1.0"
serde_yaml  = "0.9"
flate2 = "1.0"
chrono = "0.4"
anyhow      = "1.0"
log         = "0.4"
once_cell = "1.19"
clap = { version = "4.5.47", features = ["derive"] }
env_logger = "0.11"
rand = "0.9"
rand_xoshiro = "0.7"
regex = "1.11.2"
smallvec = "1.15"


# Debug build optimizations for reasonable test performance
# TT operations with SIMD and CAS loops are extremely slow without optimization
[profile.dev]
opt-level = 1  # Basic optimizations for debug builds
panic = "unwind"

# Release build with debug assertions for catching bugs
[profile.release]
overflow-checks = true    # オーバーフロー検出
lto = "thin"             # 最適化は維持
panic = "unwind"
codegen-units = 1        # テスト: より最適化される可能性
