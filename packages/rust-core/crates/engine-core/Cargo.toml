[package]
name = "engine-core"
version = "0.1.0"
edition = "2021"
authors = ["sh11235"]
description = "Shogi engine core library"
license = "MIT"
repository = "https://github.com/sh11235/shogi"

[dependencies]
# Workspace dependencies
anyhow.workspace = true
log.workspace = true
once_cell.workspace = true
rand.workspace = true
rand_xoshiro.workspace = true
serde.workspace = true

[target.'cfg(unix)'.dependencies]
libc = "0.2"

[target.'cfg(windows)'.dependencies]
# Keep in sync with clap's transitive windows-sys (0.60.x) to avoid duplicate versions on Windows.
windows-sys = { version = "0.60.2", features = [
  "Win32_Foundation",
  "Win32_Security",
  "Win32_System_Memory",
  "Win32_System_Threading",
] }

# getrandom for WebAssembly support (required by rand)
[target.'cfg(target_arch = "wasm32")'.dependencies]
getrandom = { workspace = true }

[dev-dependencies]
# Test dependencies

[target.'cfg(all(target_arch = "wasm32", target_os = "unknown"))'.dependencies]
web-time = "1"

[features]
default = []
# デバッグ機能
debug = []
# SIMD最適化（AVX2）
simd_avx2 = []
# 診断ログ
diagnostics = []
# WebAssembly threads を有効化
wasm-threads = []
# YaneuraOu DEEP相当のデフォルト遅延設定を使う
# GPU/ネットワーク待ちが長い環境向けの遅延マージン(400/1400ms)プリセットを有効化する
deep = []
# 大会用ビルド: Material評価を削除し、NNUEを必須とする
# - Material評価コードを完全に削除（バイナリサイズ削減）
# - NNUEがロードされていない場合はパニック
# - Wasm buildでも使用可能
# - デスクトップ配布用リリースビルドで推奨
#
# 注意: tournamentフィーチャーを有効にする場合、
# アプリケーション起動時にNNUEの初期化が必須。
# 初期化忘れはpanicを引き起こす。
#
# 使用例: cargo build --release --features tournament
tournament = []

[lib]
name = "engine_core"
path = "src/lib.rs"
