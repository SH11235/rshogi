[package]
name = "engine-usi"
version = "0.1.0"
edition = "2021"

[dependencies]
anyhow = { workspace = true }
log = { workspace = true }
env_logger = { workspace = true }
regex = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }

engine-core = { path = "../engine-core" }

[features]
# パススルー: engine-core の機能を再エクスポート（ビルド時切替用）
nnue-telemetry = ["engine-core/nnue_telemetry"]
fast-fma = ["engine-core/nnue_fast_fma"]
diff-agg-hash = ["engine-core/diff_agg_hash"]
tt_metrics = ["engine-core/tt_metrics"]
ybwc = ["engine-core/ybwc"]
nightly = ["engine-core/nightly"]

# Quiescence QS checks compile-time overrides (pass-through)
qs_checks_force_off = ["engine-core/qs_checks_force_off"]
qs_checks_force_on  = ["engine-core/qs_checks_force_on"]

# メタフィーチャー: 診断系を一括ON
diagnostics = [
    "engine-core/tt_metrics",
    "engine-core/nnue_telemetry",
    "engine-core/diagnostics",
]

# PV debug logs (separate feature for verbose PV debugging)
pv_debug_logs = ["engine-core/pv_debug_logs"]

# メタフィーチャー（任意）: 実験系を一括ON
experiments = [
    "engine-core/diff_agg_hash",
]

# USI ログの冗長出力を有効化
verbose_usi = []

[dev-dependencies]
assert_cmd = "2.0"
